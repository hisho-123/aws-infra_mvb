# aws　service

awsのサービスについて調べたことなについてまとめる。

## IAM

- ユーザーサービス
- 権限管理を行う。

### ユーザー

- AWSアカウントのユーザー
- それぞれのユーザーで権限を管理できる。


### ユーザーグループ

- 何の権限を持つかをグループで管理する。
- ユーザーをグループに追加することで、その権限をユーザーに与える。

## awsタグ
リソースを識別・整理するための「key」と「value」で構成されるラベル。
リソースごと最大50個まで設定可能。

## vpc
仮想プライベートクラウド


## ネトワーク関連
### CIDR
IPアドレスの範囲を表す。
ex)10.0.0.0/16 <- これのこと自体を指す

## サブネット
ipの範囲、本来の意味と相違ない。

## ルーティング

### ルートテーブル
受診元のipと宛先のipを紐づける設定を記述する。

- メインルートテーブル
  - vpcに自動で割り当てられるルートテーブル
  - 他のルートテーブルに明示的に関連づけられていないルーティング設定を制御する。
  - ユーザーが明示的に触ることはない？
- カスタムルートテーブル
  - vpcように作成するルートテーブル。
- ローカルルート
  - vpc内のデフォルトルート。

### elastic ip(eip)
再起動などしても変化しない静的なIPアドレス


## ゲートウェイ
２つ以上のネットワークを接続する。

```
[ インターネット ]
      |
   IGW / NAT
      |
    [ VPC ] ---- VPC Peering / Transit Gateway ---- [ 他VPC ]
      |
  VPC Endpoint
      |
 [ AWSサービス ]

      |
   VPN / Direct Connect
      |
 [ オンプレミス ]
```

### internet gateway(IGW)
vpcとインターネットを接続する。

#### NAT gateway
vpcからインターネットに接続する。
片方向の接続のみ。
インターネットからvpcには接続できない。

#### ピアリング(ピーリング)接続
vpc間のリソースをルーティングできる。
vpc間の1対1の接続のみ

#### transit gateway(TGW)
複数間のvpcをまとめて接続する。

#### vpc endpoint
vpcからawsサービスに接続する。
インターネットは使用せず、プライベート通信

#### VPN/Direct Connect
vpcとオンプレミスのネットワークを接続する。

## スケジュール
### AWS Lambda
サーバー管理を必要とせず、コードを実行できるサービス。
リソースの自動起動/停止など

## deploy
### CodeDeploy
awsサービスで構築された環境に対して、コードのデプロイが可能。CI/CDの一種。
githubで管理しているコードをデプロイ可能。
codeでdeployできるよってこと。



# directory構成

## terraform
terraform自体の設定

## provider
クラウドの設定
どのクラウドを使用するかなど

## resource
リソース定義

## variable
変数定義

## output
出力定義

## main.tf
リソース定義を記載
実際の設定値は、variables.tfで定義する。

## variables.tf
リポジトリ内で使用する変数を定義する。

## outputs.tf
リソースの出力値を定義する。

## terraform.tfvars



